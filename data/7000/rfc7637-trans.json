{
  "title": {
    "text": "RFC 7637 - NVGRE: Network Virtualization Using Generic Routing Encapsulation",
    "ja": "RFC 7637 - NVGRE：Generic Routing Encapsulationを使用したネットワーク仮想化"
  },
  "number": 7637,
  "created_at": "2020-08-22 12:54:04.023093+09:00",
  "updated_by": "",
  "contents": [
    {
      "indent": 0,
      "text": "Independent Submission                                      P. Garg, Ed.\nRequest for Comments: 7637                                  Y. Wang, Ed.\nCategory: Informational                                        Microsoft\nISSN: 2070-1721                                           September 2015",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "NVGRE: Network Virtualization Using Generic Routing Encapsulation",
      "ja": "NVGRE：Generic Routing Encapsulationを使用したネットワーク仮想化"
    },
    {
      "indent": 0,
      "text": "Abstract",
      "ja": "概要"
    },
    {
      "indent": 3,
      "text": "This document describes the usage of the Generic Routing Encapsulation (GRE) header for Network Virtualization (NVGRE) in multi-tenant data centers. Network Virtualization decouples virtual networks and addresses from physical network infrastructure, providing isolation and concurrency between multiple virtual networks on the same physical network infrastructure. This document also introduces a Network Virtualization framework to illustrate the use cases, but the focus is on specifying the data-plane aspect of NVGRE.",
      "ja": "このドキュメントでは、マルチテナントデータセンターでのネットワーク仮想化（NVGRE）のGeneric Routing Encapsulation（GRE）ヘッダーの使用法について説明します。ネットワーク仮想化は、物理ネットワークインフラストラクチャから仮想ネットワークとアドレスを分離し、同じ物理ネットワークインフラストラクチャ上の複数の仮想ネットワーク間の分離と同時実行性を提供します。このドキュメントでは、ユースケースを説明するためにネットワーク仮想化フレームワークも紹介していますが、焦点はNVGREのデータプレーンの側面を指定することです。"
    },
    {
      "indent": 0,
      "text": "Status of This Memo",
      "ja": "本文書の状態"
    },
    {
      "indent": 3,
      "text": "This document is not an Internet Standards Track specification; it is published for informational purposes.",
      "ja": "このドキュメントはInternet Standards Trackの仕様ではありません。情報提供を目的として公開されています。"
    },
    {
      "indent": 3,
      "text": "This is a contribution to the RFC Series, independently of any other RFC stream. The RFC Editor has chosen to publish this document at its discretion and makes no statement about its value for implementation or deployment. Documents approved for publication by the RFC Editor are not a candidate for any level of Internet Standard; see Section 2 of RFC 5741.",
      "ja": "これは、他のRFCストリームとは無関係に、RFCシリーズへの貢献です。 RFCエディターは、このドキュメントを独自の裁量で公開することを選択し、実装または展開に対するその価値については何も述べていません。 RFC Editorによって公開が承認されたドキュメントは、どのレベルのインターネット標準の候補にもなりません。 RFC 5741のセクション2をご覧ください。"
    },
    {
      "indent": 3,
      "text": "Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc7637.",
      "ja": "このドキュメントの現在のステータス、エラッタ、およびフィードバックの提供方法に関する情報は、http：//www.rfc-editor.org/info/rfc7637で入手できます。"
    },
    {
      "indent": 0,
      "text": "Copyright Notice",
      "ja": "著作権表示"
    },
    {
      "indent": 3,
      "text": "Copyright (c) 2015 IETF Trust and the persons identified as the document authors. All rights reserved.",
      "ja": "Copyright（c）2015 IETF Trustおよびドキュメントの作成者として識別された人物。全著作権所有。"
    },
    {
      "indent": 3,
      "text": "This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document.",
      "ja": "この文書は、BCP 78およびこの文書の発行日に有効なIETF文書に関するIETFトラストの法的規定（http://trustee.ietf.org/license-info）の対象となります。これらのドキュメントは、このドキュメントに関するあなたの権利と制限を説明しているため、注意深く確認してください。"
    },
    {
      "indent": 0,
      "text": "Table of Contents",
      "ja": "目次"
    },
    {
      "indent": 3,
      "text": "1. Introduction ....................................................2\n   1.1. Terminology ................................................4\n2. Conventions Used in This Document ...............................4\n3. Network Virtualization Using GRE (NVGRE) ........................4\n   3.1. NVGRE Endpoint .............................................5\n   3.2. NVGRE Frame Format .........................................5\n   3.3. Inner Tag as Defined by IEEE 802.1Q ........................8\n   3.4. Reserved VSID ..............................................8\n4. NVGRE Deployment Considerations .................................9\n   4.1. ECMP Support ...............................................9\n   4.2. Broadcast and Multicast Traffic ............................9\n   4.3. Unicast Traffic ............................................9\n   4.4. IP Fragmentation ..........................................10\n   4.5. Address/Policy Management and Routing .....................10\n   4.6. Cross-Subnet, Cross-Premise Communication .................10\n   4.7. Internet Connectivity .....................................12\n   4.8. Management and Control Planes .............................12\n   4.9. NVGRE-Aware Devices .......................................12\n   4.10. Network Scalability with NVGRE ...........................13\n5. Security Considerations ........................................14\n6. Normative References ...........................................14\nContributors ......................................................16\nAuthors' Addresses ................................................17",
      "raw": true,
      "toc": true,
      "ja": ""
    },
    {
      "indent": 0,
      "text": "1. Introduction",
      "section_title": true,
      "ja": "1. はじめに"
    },
    {
      "indent": 3,
      "text": "Conventional data center network designs cater to largely static workloads and cause fragmentation of network and server capacity [6] [7]. There are several issues that limit dynamic allocation and consolidation of capacity. Layer 2 networks use the Rapid Spanning Tree Protocol (RSTP), which is designed to eliminate loops by blocking redundant paths. These eliminated paths translate to wasted capacity and a highly oversubscribed network. There are alternative approaches such as the Transparent Interconnection of Lots of Links (TRILL) that address this problem [13].",
      "ja": "従来のデータセンターネットワーク設計は、主に静的なワークロードに対応し、ネットワークとサーバーのキャパシティの断片化を引き起こします[6] [7]。動的な割り当てと容量の統合を制限するいくつかの問題があります。レイヤー2ネットワークは、冗長パスをブロックすることによりループを排除するように設計された高速スパニングツリープロトコル（RSTP）を使用します。これらの排除されたパスは、無駄な容量と非常にオーバーサブスクライブされたネットワークにつながります。この問題に対処する多くのリンクの透過的相互接続（TRILL）などの代替アプローチがあります[13]。"
    },
    {
      "indent": 0,
      "text": " The network utilization inefficiencies are exacerbated by network fragmentation due to the use of VLANs for broadcast isolation. VLANs are used for traffic management and also as the mechanism for providing security and performance isolation among services belonging to different tenants. The Layer 2 network is carved into smaller-sized subnets (typically, one subnet per VLAN), with VLAN tags configured on all the Layer 2 switches connected to server racks that host a given tenant's services. The current VLAN limits theoretically allow for 4,000 such subnets to be created. The size of the broadcast domain is typically restricted due to the overhead of broadcast traffic. The 4,000-subnet limit on VLANs is no longer sufficient in a shared infrastructure servicing multiple tenants.",
      "ja": "ブロードキャストの分離にVLANを使用しているため、ネットワークの断片化により、ネットワーク使用効率の非効率性が悪化します。 VLANは、トラフィック管理と、異なるテナントに属するサービス間でセキュリティとパフォーマンスの分離を提供するメカニズムとして使用されます。レイヤー2ネットワークは、より小さいサイズのサブネット（通常、VLANごとに1つのサブネット）に分割され、特定のテナントのサービスをホストするサーバーラックに接続されたすべてのレイヤー2スイッチにVLANタグが構成されます。現在のVLANの制限では、理論上、4,000のサブネットを作成できます。ブロードキャストドメインのサイズは、通常、ブロードキャストトラフィックのオーバーヘッドのために制限されます。 VLANの4,000サブネットの制限は、複数のテナントにサービスを提供する共有インフラストラクチャではもはや十分ではありません。"
    },
    {
      "indent": 3,
      "text": "Data center operators must be able to achieve high utilization of server and network capacity. In order to achieve efficiency, it should be possible to assign workloads that operate in a single Layer 2 network to any server in any rack in the network. It should also be possible to migrate workloads to any server anywhere in the network while retaining the workloads' addresses. This can be achieved today by stretching VLANs; however, when workloads migrate, the network needs to be reconfigured and that is typically error prone. By decoupling the workload's location on the LAN from its network address, the network administrator configures the network once, not every time a service migrates. This decoupling enables any server to become part of any server resource pool.",
      "ja": "データセンターのオペレーターは、サーバーとネットワーク容量の高い利用率を達成できなければなりません。効率を上げるために、単一のレイヤー2ネットワークで動作するワークロードを、ネットワーク内の任意のラック内の任意のサーバーに割り当てることができるはずです。また、ワークロードのアドレスを保持しながら、ネットワーク内の任意のサーバーにワークロードを移行することもできます。これは、VLANを拡張することで今日実現できます。ただし、ワークロードが移行する場合は、ネットワークを再構成する必要があり、通常はエラーが発生しやすくなります。ネットワークアドレスからLAN上のワークロードの場所を分離することにより、ネットワーク管理者は、サービスが移行するたびにではなく、ネットワークを1回構成します。この分離により、任意のサーバーを任意のサーバーリソースプールの一部にすることができます。"
    },
    {
      "indent": 3,
      "text": "The following are key design objectives for next-generation data centers:",
      "ja": "以下は、次世代データセンターの主要な設計目標です。"
    },
    {
      "indent": 6,
      "text": "a) location-independent addressing",
      "ja": "a) 場所に依存しないアドレス指定"
    },
    {
      "indent": 6,
      "text": "b) the ability to a scale the number of logical Layer 2 / Layer 3 networks, irrespective of the underlying physical topology or the number of VLANs",
      "ja": "b) 基礎となる物理トポロジーやVLANの数に関係なく、論理レイヤー2 /レイヤー3ネットワークの数をスケーリングする機能"
    },
    {
      "indent": 6,
      "text": "c) preserving Layer 2 semantics for services and allowing them to retain their addresses as they move within and across data centers",
      "ja": "c) サービスのレイヤー2セマンティクスを保持し、データセンター内およびデータセンター間を移動するときに、サービスがアドレスを保持できるようにします。"
    },
    {
      "indent": 6,
      "text": "d) providing broadcast isolation as workloads move around without burdening the network control plane",
      "ja": "d) ワークロードがネットワークコントロールプレーンに負担をかけずに移動するときにブロードキャストを分離"
    },
    {
      "indent": 3,
      "text": "This document describes use of the Generic Routing Encapsulation (GRE) header [3] [4] for network virtualization. Network virtualization decouples a virtual network from the underlying physical network infrastructure by virtualizing network addresses. Combined with a management and control plane for the virtual-to-physical mapping, network virtualization can enable flexible virtual machine placement and movement and provide network isolation for a multi-tenant data center.",
      "ja": "このドキュメントでは、ネットワーク仮想化のためのGeneric Routing Encapsulation（GRE）ヘッダー[3] [4]の使用について説明します。ネットワーク仮想化は、ネットワークアドレスを仮想化することにより、仮想ネットワークを基盤となる物理ネットワークインフラストラクチャから切り離します。仮想から物理へのマッピングのための管理および制御プレーンと組み合わせて、ネットワーク仮想化は柔軟な仮想マシンの配置と移動を可能にし、マルチテナントデータセンターにネットワーク分離を提供できます。"
    },
    {
      "indent": 3,
      "text": "Network virtualization enables customers to bring their own address spaces into a multi-tenant data center, while the data center administrators can place the customer virtual machines anywhere in the data center without reconfiguring their network switches or routers, irrespective of the customer address spaces.",
      "ja": "ネットワーク仮想化により、顧客は独自のアドレススペースをマルチテナントデータセンターに持ち込むことができます。一方、データセンター管理者は、顧客のアドレススペースに関係なく、ネットワークスイッチやルーターを再構成することなく、顧客の仮想マシンをデータセンターのどこにでも配置できます。"
    },
    {
      "indent": 0,
      "text": "1.1. Terminology",
      "section_title": true,
      "ja": "1.1. 用語"
    },
    {
      "indent": 3,
      "text": "Please refer to RFCs 7364 [10] and 7365 [11] for more formal definitions of terminology. The following terms are used in this document.",
      "ja": "用語のより正式な定義については、RFC 7364 [10]および7365 [11]を参照してください。このドキュメントでは、次の用語が使用されています。"
    },
    {
      "indent": 3,
      "text": "Customer Address (CA): This is the virtual IP address assigned and configured on the virtual Network Interface Controller (NIC) within each VM. This is the only address visible to VMs and applications running within VMs.",
      "ja": "カスタマーアドレス（CA）：これは、各VM内の仮想ネットワークインターフェイスコントローラー（NIC）に割り当てられ、構成された仮想IPアドレスです。これは、VMおよびVM内で実行されているアプリケーションに表示される唯一のアドレスです。"
    },
    {
      "indent": 3,
      "text": "Network Virtualization Edge (NVE): This is an entity that performs the network virtualization encapsulation and decapsulation.",
      "ja": "ネットワーク仮想化エッジ（NVE）：これは、ネットワーク仮想化のカプセル化とカプセル化解除を実行するエンティティです。"
    },
    {
      "indent": 3,
      "text": "Provider Address (PA): This is the IP address used in the physical network. PAs are associated with VM CAs through the network virtualization mapping policy.",
      "ja": "プロバイダーアドレス（PA）：物理ネットワークで使用されるIPアドレスです。 PAは、ネットワーク仮想化マッピングポリシーを通じてVM CAに関連付けられます。"
    },
    {
      "indent": 3,
      "text": "Virtual Machine (VM): This is an instance of an OS running on top of the hypervisor over a physical machine or server. Multiple VMs can share the same physical server via the hypervisor, yet are completely isolated from each other in terms of CPU usage, storage, and other OS resources.",
      "ja": "仮想マシン（VM）：これは、物理マシンまたはサーバー上のハイパーバイザーの上で実行されているOSのインスタンスです。複数のVMがハイパーバイザーを介して同じ物理サーバーを共有できますが、CPU使用率、ストレージ、およびその他のOSリソースの点で互いに完全に分離されています。"
    },
    {
      "indent": 3,
      "text": "Virtual Subnet Identifier (VSID): This is a 24-bit ID that uniquely identifies a virtual subnet or virtual Layer 2 broadcast domain.",
      "ja": "Virtual Subnet Identifier（VSID）：これは、仮想サブネットまたは仮想レイヤー2ブロードキャストドメインを一意に識別する24ビットのIDです。"
    },
    {
      "indent": 0,
      "text": "2. Conventions Used in This Document",
      "section_title": true,
      "ja": "2. このドキュメントで使用される規則"
    },
    {
      "indent": 3,
      "text": "The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in RFC 2119 [1].",
      "ja": "このドキュメントのキーワード「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「MAY」、および「OPTIONAL」は、 RFC 2119 [1]で説明されているように解釈されます。"
    },
    {
      "indent": 3,
      "text": "In this document, these words will appear with that interpretation only when in ALL CAPS. Lowercase uses of these words are not to be interpreted as carrying the significance defined in RFC 2119.",
      "ja": "このドキュメントでは、これらの単語はすべて大文字の場合にのみその解釈で表示されます。これらの単語の小文字の使用は、RFC 2119で定義された重要性を持つと解釈されるべきではありません。"
    },
    {
      "indent": 0,
      "text": "3. Network Virtualization Using GRE (NVGRE)",
      "section_title": true,
      "ja": "3. GRE（NVGRE）を使用したネットワーク仮想化"
    },
    {
      "indent": 3,
      "text": "This section describes Network Virtualization using GRE (NVGRE). Network virtualization involves creating virtual Layer 2 topologies on top of a physical Layer 3 network. Connectivity in the virtual topology is provided by tunneling Ethernet frames in GRE over IP over the physical network.",
      "ja": "このセクションでは、GRE（NVGRE）を使用したネットワーク仮想化について説明します。ネットワーク仮想化では、物理レイヤー3ネットワークの上に仮想レイヤー2トポロジを作成します。仮想トポロジでの接続は、物理ネットワーク上のGRE over IPでイーサネットフレームをトンネリングすることによって提供されます。"
    },
    {
      "indent": 3,
      "text": "In NVGRE, every virtual Layer 2 network is associated with a 24-bit identifier, called a Virtual Subnet Identifier (VSID). A VSID is carried in an outer header as defined in Section 3.2. This allows",
      "ja": "NVGREでは、すべての仮想レイヤー2ネットワークは、仮想サブネット識別子（VSID）と呼ばれる24ビットの識別子に関連付けられています。セクション3.2で定義されているように、VSIDは外部ヘッダーで伝送されます。これにより"
    },
    {
      "indent": 3,
      "text": "unique identification of a tenant's virtual subnet to various devices in the network. A 24-bit VSID supports up to 16 million virtual subnets in the same management domain, in contrast to only 4,000 that is achievable with VLANs. Each VSID represents a virtual Layer 2 broadcast domain, which can be used to identify a virtual subnet of a given tenant. To support multi-subnet virtual topology, data center administrators can configure routes to facilitate communication between virtual subnets of the same tenant.",
      "ja": "ネットワーク内のさまざまなデバイスに対するテナントの仮想サブネットの一意の識別。 24ビットのVSIDは、同じ管理ドメインで最大1600万の仮想サブネットをサポートしますが、VLANでは4,000しか実現できません。各VSIDは仮想レイヤ2ブロードキャストドメインを表します。これは、特定のテナントの仮想サブネットを識別するために使用できます。マルチサブネット仮想トポロジをサポートするために、データセンター管理者はルートを構成して、同じテナントの仮想サブネット間の通信を容易にすることができます。"
    },
    {
      "indent": 3,
      "text": "GRE is a Proposed Standard from the IETF [3] [4] and provides a way for encapsulating an arbitrary protocol over IP. NVGRE leverages the GRE header to carry VSID information in each packet. The VSID information in each packet can be used to build multi-tenant-aware tools for traffic analysis, traffic inspection, and monitoring.",
      "ja": "GREはIETF [3] [4]から提案された標準であり、IPを介して任意のプロトコルをカプセル化する方法を提供します。 NVGREはGREヘッダーを利用して、各パケットでVSID情報を伝送します。各パケットのVSID情報を使用して、トラフィック分析、トラフィック検査、および監視のためのマルチテナント対応ツールを構築できます。"
    },
    {
      "indent": 3,
      "text": "The following sections detail the packet format for NVGRE; describe the functions of an NVGRE endpoint; illustrate typical traffic flow both within and across data centers; and discuss address/policy management, and deployment considerations.",
      "ja": "次のセクションでは、NVGREのパケット形式について詳しく説明します。 NVGREエンドポイントの機能を説明します。データセンター内およびデータセンター間の典型的なトラフィックフローを示します。また、アドレス/ポリシー管理、および導入に関する考慮事項について話し合います。"
    },
    {
      "indent": 0,
      "text": "3.1. NVGRE Endpoint",
      "section_title": true,
      "ja": "3.1. NVGREエンドポイント"
    },
    {
      "indent": 3,
      "text": "NVGRE endpoints are the ingress/egress points between the virtual and the physical networks. The NVGRE endpoints are the NVEs as defined in the Network Virtualization over Layer 3 (NVO3) Framework document [11]. Any physical server or network device can be an NVGRE endpoint. One common deployment is for the endpoint to be part of a hypervisor. The primary function of this endpoint is to encapsulate/decapsulate Ethernet data frames to and from the GRE tunnel, ensure Layer 2 semantics, and apply isolation policy scoped on VSID. The endpoint can optionally participate in routing and function as a gateway in the virtual topology. To encapsulate an Ethernet frame, the endpoint needs to know the location information for the destination address in the frame. This information can be provisioned via a management plane or obtained via a combination of control-plane distribution or data-plane learning approaches. This document assumes that the location information, including VSID, is available to the NVGRE endpoint.",
      "ja": "NVGREエンドポイントは、仮想ネットワークと物理ネットワークの間の入口/出口ポイントです。 NVGREエンドポイントは、Network Virtualization over Layer 3（NVO3）Frameworkドキュメント[11]で定義されているNVEです。任意の物理サーバーまたはネットワークデバイスをNVGREエンドポイントにすることができます。一般的な展開の1つは、エンドポイントをハイパーバイザーの一部にすることです。このエンドポイントの主な機能は、GREトンネルとの間のイーサネットデータフレームをカプセル化/カプセル化解除し、レイヤー2のセマンティクスを確認し、VSIDをスコープとする分離ポリシーを適用することです。エンドポイントは、オプションでルーティングに参加し、仮想トポロジのゲートウェイとして機能できます。イーサネットフレームをカプセル化するには、エンドポイントはフレーム内の宛先アドレスの位置情報を知っている必要があります。この情報は、管理プレーンを介してプロビジョニングするか、コントロールプレーン分散またはデータプレーン学習アプローチの組み合わせを介して取得できます。このドキュメントでは、VSIDを含む場所情報がNVGREエンドポイントで利用可能であることを前提としています。"
    },
    {
      "indent": 0,
      "text": "3.2. NVGRE Frame Format",
      "section_title": true,
      "ja": "3.2. NVGREフレーム形式"
    },
    {
      "indent": 3,
      "text": "The GRE header format as specified in RFCs 2784 [3] and 2890 [4] is used for communication between NVGRE endpoints. NVGRE leverages the Key extension specified in RFC 2890 [4] to carry the VSID. The packet format for Layer 2 encapsulation in GRE is shown in Figure 1.",
      "ja": "RFC 2784 [3]および2890 [4]で指定されているGREヘッダー形式は、NVGREエンドポイント間の通信に使用されます。 NVGREは、RFC 2890 [4]で指定されているキー拡張を利用して、VSIDを伝送します。 GREのレイヤ2カプセル化のパケット形式を図1に示します。"
    },
    {
      "indent": 3,
      "text": "Outer Ethernet Header:\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                (Outer) Destination MAC Address                |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|(Outer)Destination MAC Address |  (Outer)Source MAC Address    |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                  (Outer) Source MAC Address                   |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|Optional Ethertype=C-Tag 802.1Q| Outer VLAN Tag Information    |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|       Ethertype 0x0800        |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "Outer IPv4 Header:\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|Version|  HL   |Type of Service|          Total Length         |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|         Identification        |Flags|      Fragment Offset    |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|  Time to Live | Protocol 0x2F |         Header Checksum       |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                      (Outer) Source Address                   |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                  (Outer) Destination Address                  |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 0,
      "text": "   GRE Header:\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |0| |1|0|   Reserved0     | Ver |   Protocol Type 0x6558        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |               Virtual Subnet ID (VSID)        |    FlowID     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   Inner Ethernet Header\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                (Inner) Destination MAC Address                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |(Inner)Destination MAC Address |  (Inner)Source MAC Address    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                  (Inner) Source MAC Address                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |       Ethertype 0x0800        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   Inner IPv4 Header:\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Version|  HL   |Type of Service|          Total Length         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |         Identification        |Flags|      Fragment Offset    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Time to Live |    Protocol   |         Header Checksum       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       Source Address                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                    Destination Address                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                    Options                    |    Padding    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Original IP Payload                      |\n   |                                                               |\n   |                                                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 15,
      "text": "Figure 1: GRE Encapsulation Frame Format",
      "ja": "図1：GREカプセル化フレーム形式"
    },
    {
      "indent": 3,
      "text": "Note: HL stands for Header Length.",
      "ja": "注：HLはヘッダーの長さを表します。"
    },
    {
      "indent": 3,
      "text": "The outer/delivery headers include the outer Ethernet header and the outer IP header:",
      "ja": "外部/配信ヘッダーには、外部イーサネットヘッダーと外部IPヘッダーが含まれます。"
    },
    {
      "indent": 3,
      "text": "o The outer Ethernet header: The source Ethernet address in the outer frame is set to the MAC address associated with the NVGRE endpoint. The destination endpoint may or may not be on the same physical subnet. The destination Ethernet address is set to the MAC address of the next-hop IP address for the destination NVE. The outer VLAN tag information is optional and can be used for traffic management and broadcast scalability on the physical network.",
      "ja": "o 外部イーサネットヘッダー：外部フレームの送信元イーサネットアドレスは、NVGREエンドポイントに関連付けられたMACアドレスに設定されます。宛先エンドポイントは、同じ物理サブネット上にあってもなくてもかまいません。宛先イーサネットアドレスは、宛先NVEのネクストホップIPアドレスのMACアドレスに設定されます。外部VLANタグ情報はオプションであり、物理ネットワーク上のトラフィック管理およびブロードキャストスケーラビリティに使用できます。"
    },
    {
      "indent": 3,
      "text": "o The outer IP header: Both IPv4 and IPv6 can be used as the delivery protocol for GRE. The IPv4 header is shown for illustrative purposes. Henceforth, the IP address in the outer frame is referred to as the Provider Address (PA). There can be one or more PA associated with an NVGRE endpoint, with policy controlling the choice of which PA to use for a given Customer Address (CA) for a customer VM.",
      "ja": "o 外部IPヘッダー：IPv4とIPv6の両方をGREの配信プロトコルとして使用できます。 IPv4ヘッダーは、説明のために示しています。以降、外枠のIPアドレスをプロバイダーアドレス（PA）と呼びます。 NVGREエンドポイントに関連付けられた1つ以上のPAがあり、ポリシーは顧客VMの特定の顧客アドレス（CA）に使用するPAの選択を制御します。"
    },
    {
      "indent": 3,
      "text": "In the GRE header:",
      "ja": "GREヘッダー："
    },
    {
      "indent": 3,
      "text": "o The C (Checksum Present) and S (Sequence Number Present) bits in the GRE header MUST be zero.",
      "ja": "o GREヘッダーのC（チェックサム存在）およびS（シーケンス番号存在）ビットはゼロでなければなりません。"
    },
    {
      "indent": 3,
      "text": "o The K (Key Present) bit in the GRE header MUST be set to one. The 32-bit Key field in the GRE header is used to carry the Virtual Subnet ID (VSID) and the FlowID:",
      "ja": "o GREヘッダーのK（Key Present）ビットは1に設定する必要があります。 GREヘッダーの32ビットのキーフィールドは、仮想サブネットID（VSID）とFlowIDを伝達するために使用されます。"
    },
    {
      "indent": 6,
      "text": "- Virtual Subnet ID (VSID): This is a 24-bit value that is used to identify the NVGRE-based Virtual Layer 2 Network.",
      "ja": "- 仮想サブネットID（VSID）：これは、NVGREベースの仮想レイヤー2ネットワークを識別するために使用される24ビットの値です。"
    },
    {
      "indent": 6,
      "text": "- FlowID: This is an 8-bit value that is used to provide per-flow entropy for flows in the same VSID. The FlowID MUST NOT be modified by transit devices. The encapsulating NVE SHOULD provide as much entropy as possible in the FlowID. If a FlowID is not generated, it MUST be set to all zeros.",
      "ja": "- FlowID：これは、同じVSIDのフローにフローごとのエントロピーを提供するために使用される8ビット値です。 FlowIDは、トランジットデバイスによって変更してはなりません。カプセル化NVEは、FlowIDで可能な限り多くのエントロピーを提供する必要があります（SHOULD）。 FlowIDが生成されない場合は、すべてゼロに設定する必要があります。"
    },
    {
      "indent": 3,
      "text": "o The Protocol Type field in the GRE header is set to 0x6558 (Transparent Ethernet Bridging) [2].",
      "ja": "o GREヘッダーのプロトコルタイプフィールドは0x6558（トランスペアレントイーサネットブリッジング）[2]に設定されています。"
    },
    {
      "indent": 3,
      "text": "In the inner headers (headers of the GRE payload):",
      "ja": "内部ヘッダー（GREペイロードのヘッダー）："
    },
    {
      "indent": 3,
      "text": "o The inner Ethernet frame comprises an inner Ethernet header followed by optional inner IP header, followed by the IP payload. The inner frame could be any Ethernet data frame not just IP. Note that the inner Ethernet frame's Frame Check Sequence (FCS) is not encapsulated.",
      "ja": "o 内部イーサネットフレームは、内部イーサネットヘッダー、オプションの内部IPヘッダー、IPペイロードの順に構成されます。内部フレームは、IPだけでなく任意のイーサネットデータフレームにすることができます。内部イーサネットフレームのフレームチェックシーケンス（FCS）はカプセル化されないことに注意してください。"
    },
    {
      "indent": 3,
      "text": "o For illustrative purposes, IPv4 headers are shown as the inner IP headers, but IPv6 headers may be used. Henceforth, the IP address contained in the inner frame is referred to as the Customer Address (CA).",
      "ja": "o 説明のために、IPv4ヘッダーが内部IPヘッダーとして示されていますが、IPv6ヘッダーが使用される場合があります。以降、内部フレームに含まれるIPアドレスを顧客アドレス（CA）と呼びます。"
    },
    {
      "indent": 0,
      "text": "3.3. Inner Tag as Defined by IEEE 802.1Q",
      "section_title": true,
      "ja": "3.3. IEEE 802.1Qで定義された内部タグ"
    },
    {
      "indent": 3,
      "text": "The inner Ethernet header of NVGRE MUST NOT contain the tag as defined by IEEE 802.1Q [5]. The encapsulating NVE MUST remove any existing IEEE 802.1Q tag before encapsulation of the frame in NVGRE. A decapsulating NVE MUST drop the frame if the inner Ethernet frame contains an IEEE 802.1Q tag.",
      "ja": "NVGREの内部イーサネットヘッダーには、IEEE 802.1Q [5]で定義されているタグを含めることはできません。カプセル化NVEは、NVGREでフレームをカプセル化する前に、既存のIEEE 802.1Qタグを削除する必要があります。内部のイーサネットフレームにIEEE 802.1Qタグが含まれている場合、カプセル化を解除するNVEはフレームをドロップする必要があります。"
    },
    {
      "indent": 0,
      "text": "3.4. Reserved VSID",
      "section_title": true,
      "ja": "3.4. 予約済みVSID"
    },
    {
      "indent": 3,
      "text": "The VSID range from 0-0xFFF is reserved for future use.",
      "ja": "0-0xFFFのVSID範囲は、将来の使用のために予約されています。"
    },
    {
      "indent": 3,
      "text": "The VSID 0xFFFFFF is reserved for vendor-specific NVE-to-NVE communication. The sender NVE SHOULD verify the receiver NVE's vendor before sending a packet using this VSID; however, such a verification mechanism is out of scope of this document. Implementations SHOULD choose a mechanism that meets their requirements.",
      "ja": "VSID 0xFFFFFFは、ベンダー固有のNVE-to-NVE通信用に予約されています。送信側NVEは、このVSIDを使用してパケットを送信する前に、受信側NVEのベンダーを確認する必要があります。ただし、このような検証メカニズムはこのドキュメントの範囲外です。実装では、要件を満たすメカニズムを選択する必要があります（SHOULD）。"
    },
    {
      "indent": 0,
      "text": "4. NVGRE Deployment Considerations",
      "section_title": true,
      "ja": "4. NVGREの展開に関する考慮事項"
    },
    {
      "indent": 0,
      "text": "4.1. ECMP Support",
      "section_title": true,
      "ja": "4.1. ECMPサポート"
    },
    {
      "indent": 3,
      "text": "Equal-Cost Multipath (ECMP) may be used to provide load balancing. If ECMP is used, it is RECOMMENDED that the ECMP hash is calculated either using the outer IP frame fields and entire Key field (32 bits) or the inner IP and transport frame fields.",
      "ja": "等コストマルチパス（ECMP）を使用して、ロードバランシングを提供できます。 ECMPを使用する場合、外部IPフレームフィールドとキーフィールド全体（32ビット）、または内部IPフィールドとトランスポートフレームフィールドのいずれかを使用してECMPハッシュを計算することをお勧めします。"
    },
    {
      "indent": 0,
      "text": "4.2. Broadcast and Multicast Traffic",
      "section_title": true,
      "ja": "4.2. ブロードキャストおよびマルチキャストトラフィック"
    },
    {
      "indent": 3,
      "text": "To support broadcast and multicast traffic inside a virtual subnet, one or more administratively scoped multicast addresses [8] [9] can be assigned for the VSID. All multicast or broadcast traffic originating from within a VSID is encapsulated and sent to the assigned multicast address. From an administrative standpoint, it is possible for network operators to configure a PA multicast address for each multicast address that is used inside a VSID; this facilitates optimal multicast handling. Depending on the hardware capabilities of the physical network devices and the physical network architecture, multiple virtual subnets may use the same physical IP multicast address.",
      "ja": "仮想サブネット内のブロードキャストおよびマルチキャストトラフィックをサポートするために、1つ以上の管理スコープマルチキャストアドレス[8] [9]をVSIDに割り当てることができます。 VSID内から発信されるすべてのマルチキャストまたはブロードキャストトラフィックはカプセル化され、割り当てられたマルチキャストアドレスに送信されます。管理の観点から、ネットワークオペレータはVSID内で使用される各マルチキャストアドレスに対してPAマルチキャストアドレスを設定することが可能です。これにより、最適なマルチキャスト処理が容易になります。物理ネットワークデバイスと物理ネットワークアーキテクチャのハードウェア機能によっては、複数の仮想サブネットが同じ物理IPマルチキャストアドレスを使用する場合があります。"
    },
    {
      "indent": 3,
      "text": "Alternatively, based upon the configuration at the NVE, broadcast and multicast in the virtual subnet can be supported using N-way unicast. In N-way unicast, the sender NVE would send one encapsulated packet to every NVE in the virtual subnet. The sender NVE can encapsulate and send the packet as described in Section 4.3 (\"Unicast Traffic\"). This alleviates the need for multicast support in the physical network.",
      "ja": "または、NVEでの構成に基づいて、N-wayユニキャストを使用して、仮想サブネットでのブロードキャストとマルチキャストをサポートできます。 N-wayユニキャストでは、送信側NVEは1つのカプセル化されたパケットを仮想サブネット内のすべてのNVEに送信します。セクション4.3（「ユニキャストトラフィック」）で説明されているように、送信側NVEはパケットをカプセル化して送信できます。これにより、物理ネットワークでのマルチキャストサポートの必要性が軽減されます。"
    },
    {
      "indent": 0,
      "text": "4.3. Unicast Traffic",
      "section_title": true,
      "ja": "4.3. ユニキャストトラフィック"
    },
    {
      "indent": 3,
      "text": "The NVGRE endpoint encapsulates a Layer 2 packet in GRE using the source PA associated with the endpoint with the destination PA corresponding to the location of the destination endpoint. As outlined earlier, there can be one or more PAs associated with an endpoint and policy will control which ones get used for communication. The encapsulated GRE packet is bridged and routed normally by the physical network to the destination PA. Bridging uses the outer Ethernet encapsulation for scope on the LAN. The only requirement is bidirectional IP connectivity from the underlying physical network. On the destination, the NVGRE endpoint decapsulates the GRE packet to recover the original Layer 2 frame. Traffic flows similarly on the reverse path.",
      "ja": "NVGREエンドポイントは、エンドポイントに関連付けられた送信元PAと宛先エンドポイントの場所に対応する宛先PAを使用して、レイヤー2パケットをGREにカプセル化します。前に概説したように、エンドポイントに関連付けられた1つ以上のPAが存在する可能性があり、ポリシーは通信に使用されるPAを制御します。カプセル化されたGREパケットはブリッジされ、通常は物理ネットワークによって宛先PAにルーティングされます。ブリッジングは、LANのスコープに外部イーサネットカプセル化を使用します。唯一の要件は、基盤となる物理ネットワークからの双方向IP接続です。宛先では、NVGREエンドポイントがGREパケットのカプセル化を解除して、元のレイヤー2フレームを復元します。トラフィックは逆のパスで同様に流れます。"
    },
    {
      "indent": 0,
      "text": "4.4. IP Fragmentation",
      "section_title": true,
      "ja": "4.4. IPフラグメンテーション"
    },
    {
      "indent": 3,
      "text": "Section 5.1 of RFC 2003 [12] specifies mechanisms for handling fragmentation when encapsulating IP within IP. The subset of mechanisms NVGRE selects are intended to ensure that NVGRE-encapsulated frames are not fragmented after encapsulation en route to the destination NVGRE endpoint and that traffic sources can leverage Path MTU discovery.",
      "ja": "RFC 2003 [12]のセクション5.1は、IP内にIPをカプセル化するときに断片化を処理するメカニズムを指定しています。 NVGREが選択するメカニズムのサブセットは、NVGREでカプセル化されたフレームが、宛先NVGREエンドポイントへの途中でカプセル化された後にフラグメント化されず、トラフィックソースがパスMTUディスカバリを活用できるようにすることを目的としています。"
    },
    {
      "indent": 3,
      "text": "A sender NVE MUST NOT fragment NVGRE packets. A receiver NVE MAY discard fragmented NVGRE packets. It is RECOMMENDED that the MTU of the physical network accommodates the larger frame size due to encapsulation. Path MTU or configuration via control plane can be used to meet this requirement.",
      "ja": "送信者NVEは、NVGREパケットをフラグメント化してはなりません（MUST NOT）。受信機NVEは、断片化されたNVGREパケットを破棄してもよい（MAY）。物理ネットワークのMTUは、カプセル化により、より大きなフレームサイズに対応することをお勧めします。パスMTUまたはコントロールプレーンを介した構成を使用して、この要件を満たすことができます。"
    },
    {
      "indent": 0,
      "text": "4.5. Address/Policy Management and Routing",
      "section_title": true,
      "ja": "4.5. アドレス/ポリシー管理とルーティング"
    },
    {
      "indent": 3,
      "text": "Address acquisition is beyond the scope of this document and can be obtained statically, dynamically, or using stateless address autoconfiguration. CA and PA space can be either IPv4 or IPv6. In fact, the address families don't have to match; for example, a CA can be IPv4 while the PA is IPv6, and vice versa.",
      "ja": "アドレスの取得はこのドキュメントの範囲外であり、静的に、動的に、またはステートレスアドレス自動構成を使用して取得できます。 CAおよびPAスペースはIPv4またはIPv6のいずれかです。実際、住所ファミリは一致する必要はありません。たとえば、PAがIPv6のときにCAをIPv4にすることができ、その逆も可能です。"
    },
    {
      "indent": 0,
      "text": "4.6. Cross-Subnet, Cross-Premise Communication",
      "section_title": true,
      "ja": "4.6. クロスサブネット、クロスプレミス通信"
    },
    {
      "indent": 3,
      "text": "One application of this framework is that it provides a seamless path for enterprises looking to expand their virtual machine hosting capabilities into public clouds. Enterprises can bring their entire IP subnet(s) and isolation policies, thus making the transition to or from the cloud simpler. It is possible to move portions of an IP subnet to the cloud; however, that requires additional configuration on the enterprise network and is not discussed in this document. Enterprises can continue to use existing communications models like site-to-site VPN to secure their traffic.",
      "ja": "このフレームワークの1つのアプリケーションは、仮想マシンのホスティング機能をパブリッククラウドに拡張しようとしている企業にシームレスなパスを提供することです。企業は、IPサブネット全体と分離ポリシーを使用できるため、クラウドへの、またはクラウドからの移行がより簡単になります。 IPサブネットの一部をクラウドに移動することは可能です。ただし、これには企業ネットワークでの追加設定が必要なので、このドキュメントでは説明しません。企業は、サイト間VPNなどの既存の通信モデルを引き続き使用して、トラフィックを保護できます。"
    },
    {
      "indent": 3,
      "text": "A VPN gateway is used to establish a secure site-to-site tunnel over the Internet, and all the enterprise services running in virtual machines in the cloud use the VPN gateway to communicate back to the enterprise. For simplicity, we use a VPN gateway configured as a VM (shown in Figure 2) to illustrate cross-subnet, cross-premise communication.",
      "ja": "VPNゲートウェイは、インターネット上で安全なサイト間トンネルを確立するために使用され、クラウド内の仮想マシンで実行されているすべてのエンタープライズサービスは、VPNゲートウェイを使用してエンタープライズと通信します。簡単にするために、VMとして構成されたVPNゲートウェイ（図2に示す）を使用して、サブネット間、構内間通信を示します。"
    },
    {
      "indent": 3,
      "text": "+-----------------------+        +-----------------------+\n|       Server 1        |        |       Server 2        |\n| +--------+ +--------+ |        | +-------------------+ |\n| | VM1    | | VM2    | |        | |    VPN Gateway    | |\n| | IP=CA1 | | IP=CA2 | |        | | Internal  External| |\n| |        | |        | |        | |  IP=CAg   IP=GAdc | |\n| +--------+ +--------+ |        | +-------------------+ |\n|       Hypervisor      |        |     | Hypervisor| ^   |\n+-----------------------+        +-------------------:---+\n            | IP=PA1                   | IP=PA4    | :\n            |                          |           | :\n            |     +-------------------------+      | : VPN\n            +-----|     Layer 3 Network     |------+ : Tunnel\n                  +-------------------------+        :\n                               |                     :\n     +-----------------------------------------------:--+\n     |                                               :  |\n     |                     Internet                  :  |\n     |                                               :  |\n     +-----------------------------------------------:--+\n                               |                     v\n                               |   +-------------------+\n                               |   |    VPN Gateway    |\n                               |---|                   |\n                          IP=GAcorp| External IP=GAcorp|\n                                   +-------------------+\n                                             |\n                                 +-----------------------+\n                                 |  Corp Layer 3 Network |\n                                 |      (In CA Space)    |\n                                 +-----------------------+\n                                             |\n                                +---------------------------+\n                                |       Server X            |\n                                | +----------+ +----------+ |\n                                | | Corp VMe1| | Corp VMe2| |\n                                | |  IP=CAe1 | |  IP=CAe2 | |\n                                | +----------+ +----------+ |\n                                |         Hypervisor        |\n                                +---------------------------+",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 12,
      "text": "Figure 2: Cross-Subnet, Cross-Premise Communication",
      "ja": "図2：クロスサブネット、クロスプレミス通信"
    },
    {
      "indent": 0,
      "text": " The packet flow is similar to the unicast traffic flow between VMs; the key difference in this case is that the packet needs to be sent to a VPN gateway before it gets forwarded to the destination. As part of routing configuration in the CA space, a per-tenant VPN gateway is provisioned for communication back to the enterprise. The example illustrates an outbound connection between VM1 inside the data center and VMe1 inside the enterprise network. When the outbound packet from CA1 to CAe1 reaches the hypervisor on Server 1, the NVE in Server 1 can perform the equivalent of a route lookup on the packet. The cross-premise packet will match the default gateway rule, as CAe1 is not part of the tenant virtual network in the data center. The virtualization policy will indicate the packet to be encapsulated and sent to the PA of the tenant VPN gateway (PA4) running as a VM on Server 2. The packet is decapsulated on Server 2 and delivered to the VM gateway. The gateway in turn validates and sends the packet on the site-to-site VPN tunnel back to the enterprise network. As the communication here is external to the data center, the PA address for the VPN tunnel is globally routable. The outer header of this packet is sourced from GAdc destined to GAcorp. This packet is routed through the Internet to the enterprise VPN gateway, which is the other end of the site-to-site tunnel; at that point, the VPN gateway decapsulates the packet and sends it inside the enterprise where the CAe1 is routable on the network. The reverse path is similar once the packet reaches the enterprise VPN gateway.",
      "ja": "パケットフローは、VM間のユニキャストトラフィックフローに似ています。この場合の主な違いは、パケットが宛先に転送される前にVPNゲートウェイに送信される必要があることです。 CAスペースでのルーティング構成の一部として、企業への通信用にテナントごとのVPNゲートウェイがプロビジョニングされます。この例は、データセンター内のVM1とエンタープライズネットワーク内のVMe1の間のアウトバウンド接続を示しています。 CA1からCAe1へのアウトバウンドパケットがサーバー1のハイパーバイザーに到達すると、サーバー1のNVEはパケットのルートルックアップと同等の機能を実行できます。 CAe1はデータセンターのテナント仮想ネットワークの一部ではないため、クロスプレミスパケットはデフォルトゲートウェイルールと一致します。仮想化ポリシーは、パケットがカプセル化され、サーバー2でVMとして実行されているテナントVPNゲートウェイ（PA4）のPAに送信されることを示します。パケットはサーバー2でカプセル化解除され、VMゲートウェイに配信されます。次にゲートウェイは、サイト間VPNトンネル上のパケットを検証して送信し、企業ネットワークに送り返します。ここでの通信はデータセンターの外部にあるため、VPNトンネルのPAアドレスはグローバルにルーティング可能です。このパケットの外部ヘッダーは、GAdcを宛先とするGAdcから供給されます。このパケットは、インターネットを介して、サイト間トンネルのもう一方の端であるエンタープライズVPNゲートウェイにルーティングされます。その時点で、VPNゲートウェイはパケットのカプセル化を解除し、CAe1がネットワーク上でルーティング可能な企業内に送信します。パケットがエンタープライズVPNゲートウェイに到達すると、逆のパスも同様になります。"
    },
    {
      "indent": 0,
      "text": "4.7. Internet Connectivity",
      "section_title": true,
      "ja": "4.7. インターネット接続"
    },
    {
      "indent": 3,
      "text": "To enable connectivity to the Internet, an Internet gateway is needed that bridges the virtualized CA space to the public Internet address space. The gateway needs to perform translation between the virtualized world and the Internet. For example, the NVGRE endpoint can be part of a load balancer or a NAT that replaces the VPN Gateway on Server 2 shown in Figure 2.",
      "ja": "インターネットへの接続を有効にするには、仮想化されたCA空間をパブリックインターネットアドレス空間にブリッジするインターネットゲートウェイが必要です。ゲートウェイは、仮想化された世界とインターネットの間の変換を実行する必要があります。たとえば、NVGREエンドポイントは、図2に示すサーバー2のVPNゲートウェイを置き換えるロードバランサーまたはNATの一部にすることができます。"
    },
    {
      "indent": 0,
      "text": "4.8. Management and Control Planes",
      "section_title": true,
      "ja": "4.8. 管理および制御プレーン"
    },
    {
      "indent": 3,
      "text": "There are several protocols that can manage and distribute policy; however, it is outside the scope of this document. Implementations SHOULD choose a mechanism that meets their scale requirements.",
      "ja": "ポリシーを管理および配布できるプロトコルはいくつかあります。ただし、このドキュメントの範囲外です。実装では、スケール要件を満たすメカニズムを選択する必要があります。"
    },
    {
      "indent": 0,
      "text": "4.9. NVGRE-Aware Devices",
      "section_title": true,
      "ja": "4.9. NVGRE対応デバイス"
    },
    {
      "indent": 0,
      "text": " One example of a typical deployment consists of virtualized servers deployed across multiple racks connected by one or more layers of Layer 2 switches, which in turn may be connected to a Layer 3 routing domain. Even though routing in the physical infrastructure will work without any modification with NVGRE, devices that perform specialized processing in the network need to be able to parse GRE to get access to tenant-specific information. Devices that understand and parse the VSID can provide rich multi-tenant-aware services inside the data center. As outlined earlier, it is imperative to exploit multiple paths inside the network through techniques such as ECMP. The Key field (a 32-bit field, including both the VSID and the optional FlowID) can provide additional entropy to the switches to exploit path diversity inside the network. A diverse ecosystem is expected to emerge as more and more devices become multi-tenant aware. In the interim, without requiring any hardware upgrades, there are alternatives to exploit path diversity with GRE by associating multiple PAs with NVGRE endpoints with policy controlling the choice of which PA to use.",
      "ja": "典型的な配置の一例は、レイヤー2スイッチの1つ以上のレイヤーによって接続された複数のラックに配置された仮想化サーバーで構成され、レイヤー3スイッチルーティングドメインに接続できます。物理インフラストラクチャでのルーティングはNVGREで変更なしで機能しますが、ネットワークで特殊な処理を実行するデバイスは、GREを解析してテナント固有の情報にアクセスできる必要があります。 VSIDを理解して解析するデバイスは、データセンター内で豊富なマルチテナント対応サービスを提供できます。前述のように、ECMPなどの手法を使用してネットワーク内の複数のパスを利用することが不可欠です。キーフィールド（VSIDとオプションのFlowIDの両方を含む32ビットのフィールド）は、スイッチに追加のエントロピーを提供して、ネットワーク内のパスダイバーシティを利用できます。ますます多くのデバイスがマルチテナントを認識するようになると、多様なエコシステムが出現すると予想されます。当面は、ハードウェアのアップグレードを必要とせずに、複数のPAをNVGREエンドポイントに関連付けて、使用するPAの選択を制御するポリシーを設定することにより、GREでパスダイバーシティを活用する代替策があります。"
    },
    {
      "indent": 3,
      "text": "It is expected that communication can span multiple data centers and also cross the virtual/physical boundary. Typical scenarios that require virtual-to-physical communication include access to storage and databases. Scenarios demanding lossless Ethernet functionality may not be amenable to NVGRE, as traffic is carried over an IP network. NVGRE endpoints mediate between the network-virtualized and non-network-virtualized environments. This functionality can be incorporated into Top-of-Rack switches, storage appliances, load balancers, routers, etc., or built as a stand-alone appliance.",
      "ja": "通信は複数のデータセンターにまたがることができ、仮想/物理的な境界を越えることも予想されます。仮想から物理への通信を必要とする一般的なシナリオには、ストレージとデータベースへのアクセスが含まれます。ロスレスイーサネット機能を要求するシナリオは、トラフィックがIPネットワークを介して伝送されるため、NVGREに対応できない場合があります。 NVGREエンドポイントは、ネットワーク仮想化環境と非ネットワーク仮想化環境の間を仲介します。この機能は、Top-of-Rackスイッチ、ストレージアプライアンス、ロードバランサー、ルーターなどに組み込むか、スタンドアロンアプライアンスとして構築できます。"
    },
    {
      "indent": 3,
      "text": "It is imperative to consider the impact of any solution on host performance. Today's server operating systems employ sophisticated acceleration techniques such as checksum offload, Large Send Offload (LSO), Receive Segment Coalescing (RSC), Receive Side Scaling (RSS), Virtual Machine Queue (VMQ), etc. These technologies should become NVGRE aware. IPsec Security Associations (SAs) can be offloaded to the NIC so that computationally expensive cryptographic operations are performed at line rate in the NIC hardware. These SAs are based on the IP addresses of the endpoints. As each packet on the wire gets translated, the NVGRE endpoint SHOULD intercept the offload requests and do the appropriate address translation. This will ensure that IPsec continues to be usable with network virtualization while taking advantage of hardware offload capabilities for improved performance.",
      "ja": "ホストのパフォーマンスに対するソリューションの影響を考慮することが不可欠です。今日のサーバーオペレーティングシステムは、チェックサムオフロード、Large Send Offload（LSO）、Receive Segment Coalescing（RSC）、Receive Side Scaling（RSS）、Virtual Machine Queue（VMQ）などの高度な高速化手法を採用しています。これらのテクノロジーはNVGREに対応する必要があります。 IPsecセキュリティアソシエーション（SA）をNICにオフロードできるため、計算コストのかかる暗号化操作がNICハードウェアでラインレートで実行されます。これらのSAは、エンドポイントのIPアドレスに基づいています。ワイヤー上の各パケットが変換されると、NVGREエンドポイントはオフロード要求をインターセプトし、適切なアドレス変換を行う必要があります（SHOULD）。これにより、ハードウェアオフロード機能を利用してパフォーマンスを向上させながら、IPsecをネットワーク仮想化で引き続き使用できるようになります。"
    },
    {
      "indent": 0,
      "text": "4.10. Network Scalability with NVGRE",
      "section_title": true,
      "ja": "4.10. NVGREによるネットワークのスケーラビリティ"
    },
    {
      "indent": 0,
      "text": " One of the key benefits of using NVGRE is the IP address scalability and in turn MAC address table scalability that can be achieved. An NVGRE endpoint can use one PA to represent multiple CAs. This lowers the burden on the MAC address table sizes at the Top-of-Rack switches. One obvious benefit is in the context of server virtualization, which has increased the demands on the network infrastructure. By embedding an NVGRE endpoint in a hypervisor, it is possible to scale significantly. This framework enables location information to be preconfigured inside an NVGRE endpoint, thus allowing broadcast ARP traffic to be proxied locally. This approach can scale to large-sized virtual subnets. These virtual subnets can be spread across multiple Layer 3 physical subnets. It allows workloads to be moved around without imposing a huge burden on the network control plane. By eliminating most broadcast traffic and converting others to multicast, the routers and switches can function more optimally by building efficient multicast trees. By using server and network capacity efficiently, it is possible to drive down the cost of building and managing data centers.",
      "ja": "NVGREを使用する主な利点の1つは、達成できるIPアドレスのスケーラビリティ、ひいてはMACアドレステーブルのスケーラビリティです。 NVGREエンドポイントは、1つのPAを使用して複数のCAを表すことができます。これにより、Top-of-RackスイッチでのMACアドレステーブルサイズの負担が軽減されます。明らかな利点の1つは、サーバー仮想化のコンテキストであり、ネットワークインフラストラクチャへの要求が高まっています。ハイパーバイザーにNVGREエンドポイントを埋め込むことにより、大幅なスケーリングが可能になります。このフレームワークにより、位置情報をNVGREエンドポイント内で事前設定できるため、ブロードキャストARPトラフィックをローカルでプロキシできます。このアプローチは、大規模な仮想サブネットに拡張できます。これらの仮想サブネットは、複数のレイヤー3物理サブネットに分散できます。これにより、ネットワークコントロールプレーンに大きな負担をかけることなく、ワークロードを移動できます。ほとんどのブロードキャストトラフィックを排除し、他のトラフィックをマルチキャストに変換することにより、ルーターとスイッチは、効率的なマルチキャストツリーを構築することにより、より最適に機能できます。サーバーとネットワークの容量を効率的に使用することで、データセンターの構築と管理のコストを削減できます。"
    },
    {
      "indent": 0,
      "text": "5. Security Considerations",
      "section_title": true,
      "ja": "5. セキュリティに関する考慮事項"
    },
    {
      "indent": 3,
      "text": "This proposal extends the Layer 2 subnet across the data center and increases the scope for spoofing attacks. Mitigations of such attacks are possible with authentication/encryption using IPsec or any other IP-based mechanism. The control plane for policy distribution is expected to be secured by using any of the existing security protocols. Further management traffic can be isolated in a separate subnet/VLAN.",
      "ja": "この提案は、レイヤー2サブネットをデータセンター全体に拡張し、スプーフィング攻撃の範囲を拡大します。このような攻撃の緩和は、IPsecまたはその他のIPベースのメカニズムを使用した認証/暗号化で可能です。ポリシー配布用のコントロールプレーンは、既存のセキュリティプロトコルのいずれかを使用して保護されることが期待されています。さらに管理トラフィックを別のサブネット/ VLANに分離できます。"
    },
    {
      "indent": 3,
      "text": "The checksum in the GRE header is not supported. The mitigation of this is to deploy an NVGRE-based solution in a network that provides error detection along the NVGRE packet path, for example, using Ethernet Cyclic Redundancy Check (CRC) or IPsec or any other error detection mechanism.",
      "ja": "GREヘッダーのチェックサムはサポートされていません。この緩和策は、NVGREベースのソリューションをネットワークに展開することです。たとえば、イーサネット巡回冗長検査（CRC）またはIPsecまたはその他のエラー検出メカニズムを使用して、NVGREパケットパスに沿ってエラーを検出します。"
    },
    {
      "indent": 0,
      "text": "6. Normative References",
      "section_title": true,
      "ja": "6. 引用文献"
    },
    {
      "indent": 3,
      "text": "[1] Bradner, S., \"Key words for use in RFCs to Indicate Requirement Levels\", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, <http://www.rfc-editor.org/info/rfc2119>.",
      "ja": "[1] Bradner、S.、「要件レベルを示すためにRFCで使用するキーワード」、BCP 14、RFC 2119、DOI 10.17487 / RFC2119、1997年3月、<http://www.rfc-editor.org/info/rfc2119>。"
    },
    {
      "indent": 3,
      "text": "[2] IANA, \"IEEE 802 Numbers\", <http://www.iana.org/assignments/ieee-802-numbers>.",
      "ja": "[2] IANA、「IEEE 802 Numbers」、<http://www.iana.org/assignments/ieee-802-numbers>。"
    },
    {
      "indent": 3,
      "text": "[3] Farinacci, D., Li, T., Hanks, S., Meyer, D., and P. Traina, \"Generic Routing Encapsulation (GRE)\", RFC 2784, DOI 10.17487/RFC2784, March 2000, <http://www.rfc-editor.org/info/rfc2784>.",
      "ja": "[3] Farinacci、D.、Li、T.、Hanks、S.、Meyer、D.、and P. Traina、 \"Generic Routing Encapsulation（GRE）\"、RFC 2784、DOI 10.17487 / RFC2784、March 2000、<http：// www.rfc-editor.org/info/rfc2784>。"
    },
    {
      "indent": 3,
      "text": "[4] Dommety, G., \"Key and Sequence Number Extensions to GRE\", RFC 2890, DOI 10.17487/RFC2890, September 2000, <http://www.rfc-editor.org/info/rfc2890>.",
      "ja": "[4] Dommety、G。、「GREのキーとシーケンス番号の拡張」、RFC 2890、DOI 10.17487 / RFC2890、2000年9月、<http://www.rfc-editor.org/info/rfc2890>。"
    },
    {
      "indent": 3,
      "text": "[5] IEEE, \"IEEE Standard for Local and metropolitan area networks--Media Access Control (MAC) Bridges and Virtual Bridged Local Area Networks\", IEEE Std 802.1Q.",
      "ja": "[5] IEEE、「IEEE Standard for Local and Metropolitan Area Network--Media Access Control（MAC）Bridges and Virtual Bridged Local Area Networks」、IEEE Std 802.1Q。"
    },
    {
      "indent": 3,
      "text": "[6] Greenberg, A., et al., \"VL2: A Scalable and Flexible Data Center Network\", Communications of the ACM, DOI 10.1145/1897852.1897877, 2011.",
      "ja": "[6] Greenberg、A.、et al。、 \"VL2：A Scalable and Flexible Data Center Network\"、Communications of the ACM、DOI 10.1145 / 1897852.1897877、2011。"
    },
    {
      "indent": 3,
      "text": "[7] Greenberg, A., et al., \"The Cost of a Cloud: Research Problems in Data Center Networks\", ACM SIGCOMM Computer Communication Review, DOI 10.1145/1496091.1496103, 2009.",
      "ja": "[7] Greenberg、A.、et al。、 \"The Cost of a Cloud：Research Problems in Data Center Networks\"、ACM SIGCOMM Computer Communication Review、DOI 10.1145 / 1496091.1496103、2009。"
    },
    {
      "indent": 3,
      "text": "[8] Hinden, R. and S. Deering, \"IP Version 6 Addressing Architecture\", RFC 4291, DOI 10.17487/RFC4291, February 2006, <http://www.rfc-editor.org/info/rfc4291>.",
      "ja": "[8] Hinden、R. and S. Deering、 \"IP Version 6 Addressing Architecture\"、RFC 4291、DOI 10.17487 / RFC4291、February 2006、<http://www.rfc-editor.org/info/rfc4291>。"
    },
    {
      "indent": 3,
      "text": "[9] Meyer, D., \"Administratively Scoped IP Multicast\", BCP 23, RFC 2365, DOI 10.17487/RFC2365, July 1998, <http://www.rfc-editor.org/info/rfc2365>.",
      "ja": "[9] Meyer、D。、「Administratively Scoped IP Multicast」、BCP 23、RFC 2365、DOI 10.17487 / RFC2365、1998年7月、<http://www.rfc-editor.org/info/rfc2365>。"
    },
    {
      "indent": 3,
      "text": "[10] Narten, T., Ed., Gray, E., Ed., Black, D., Fang, L., Kreeger, L., and M. Napierala, \"Problem Statement: Overlays for Network Virtualization\", RFC 7364, DOI 10.17487/RFC7364, October 2014, <http://www.rfc-editor.org/info/rfc7364>.",
      "ja": "[10] Narten、T.、Ed。、Gray、E.、Ed。、Black、D.、Fang、L.、Kreeger、L。、およびM. Napierala、「Problem Statement：Overlays for Network Virtualization」、RFC 7364、DOI 10.17487 / RFC7364、2014年10月、<http://www.rfc-editor.org/info/rfc7364>。"
    },
    {
      "indent": 3,
      "text": "[11] Lasserre, M., Balus, F., Morin, T., Bitar, N., and Y. Rekhter, \"Framework for Data Center (DC) Network Virtualization\", RFC 7365, DOI 10.17487/RFC7365, October 2014, <http://www.rfc-editor.org/info/rfc7365>.",
      "ja": "[11] Lasserre、M.、Balus、F.、Morin、T.、Bitar、N。、およびY. Rekhter、「Framework for Data Center（DC）Network Virtualization」、RFC 7365、DOI 10.17487 / RFC7365、2014年10月、<http ：//www.rfc-editor.org/info/rfc7365>。"
    },
    {
      "indent": 3,
      "text": "[12] Perkins, C., \"IP Encapsulation within IP\", RFC 2003, DOI 10.17487/RFC2003, October 1996, <http://www.rfc-editor.org/info/rfc2003>.",
      "ja": "[12] Perkins、C。、「IP Encapsulation within IP」、RFC 2003、DOI 10.17487 / RFC2003、1996年10月、<http://www.rfc-editor.org/info/rfc2003>。"
    },
    {
      "indent": 3,
      "text": "[13] Touch, J. and R. Perlman, \"Transparent Interconnection of Lots of Links (TRILL): Problem and Applicability Statement\", RFC 5556, DOI 10.17487/RFC5556, May 2009, <http://www.rfc-editor.org/info/rfc5556>.",
      "ja": "[13] タッチ、J。およびR.パールマン、「多数のリンクの透過的な相互接続（TRILL）：問題と適用性に関する声明」、RFC 5556、DOI 10.17487 / RFC5556、2009年5月、<http://www.rfc-editor.org/ info / rfc5556>。"
    },
    {
      "indent": 0,
      "text": "Contributors",
      "ja": "貢献者"
    },
    {
      "indent": 3,
      "text": "Murari Sridharan Microsoft Corporation 1 Microsoft Way Redmond, WA 98052 United States Email: muraris@microsoft.com",
      "ja": "Murari Sridharan Microsoft Corporation 1 Microsoft Way Redmond、WA 98052 United States Email：muraris@microsoft.com"
    },
    {
      "indent": 3,
      "text": "Albert Greenberg Microsoft Corporation 1 Microsoft Way Redmond, WA 98052 United States Email: albert@microsoft.com",
      "ja": "アルバートグリーンバーグマイクロソフトコーポレーション1マイクロソフトウェイレドモンド、ワシントン98052アメリカ合衆国メール：albert@microsoft.com"
    },
    {
      "indent": 3,
      "text": "Narasimhan Venkataramiah Microsoft Corporation 1 Microsoft Way Redmond, WA 98052 United States Email: navenkat@microsoft.com",
      "ja": "ならしｍはん ゔぇんかたらみあｈ みｃろそｆｔ こｒぽらちおん １ みｃろそｆｔ わｙ れｄもんｄ、 わ ９８０５２ うにてｄ Ｓたてｓ えまいｌ： なゔぇんかｔ＠みｃろそｆｔ。こｍ"
    },
    {
      "indent": 3,
      "text": "Kenneth Duda Arista Networks, Inc. 5470 Great America Pkwy Santa Clara, CA 95054 United States Email: kduda@aristanetworks.com",
      "ja": "Kenneth Duda Arista Networks、Inc. 5470 Great America Pkwy Santa Clara、CA 95054 United States Email：kduda@aristanetworks.com"
    },
    {
      "indent": 3,
      "text": "Ilango Ganga Intel Corporation 2200 Mission College Blvd. M/S: SC12-325 Santa Clara, CA 95054 United States Email: ilango.s.ganga@intel.com",
      "ja": "Ilango Ganga Intel Corporation 2200 Mission College Blvd. M / S：SC12-325 Santa Clara、CA 95054 United Statesメール：ilango.s.ganga@intel.com"
    },
    {
      "indent": 0,
      "text": " Geng Lin Google 1600 Amphitheatre Parkway Mountain View, CA 94043 United States Email: genglin@google.com Mark Pearson Hewlett-Packard Co. 8000 Foothills Blvd. Roseville, CA 95747 United States Email: mark.pearson@hp.com",
      "ja": "Geng Lin Google 1600 Amphitheatre Parkway Mountain View、CA 94043 United States Email：genglin@google.com Mark Pearson Hewlett-Packard Co. 8000 Foothills Blvd. Roseville、CA 95747 United Statesメール：mark.pearson@hp.com"
    },
    {
      "indent": 3,
      "text": "Patricia Thaler Broadcom Corporation 3151 Zanker Road San Jose, CA 95134 United States Email: pthaler@broadcom.com",
      "ja": "Patricia Thaler Broadcom Corporation 3151 Zanker Road San Jose、CA 95134アメリカ合衆国Eメール：pthaler@broadcom.com"
    },
    {
      "indent": 3,
      "text": "Chait Tumuluri Emulex Corporation 3333 Susan Street Costa Mesa, CA 92626 United States Email: chait@emulex.com",
      "ja": "Chait Tumuluri Emulex Corporation 3333 Susan Street Costa Mesa、CA 92626 United States Email：chait@emulex.com"
    },
    {
      "indent": 0,
      "text": "Authors' Addresses",
      "ja": "著者のアドレス"
    },
    {
      "indent": 3,
      "text": "Pankaj Garg (editor) Microsoft Corporation 1 Microsoft Way Redmond, WA 98052 United States Email: pankajg@microsoft.com",
      "ja": "ぱんかｊ がｒｇ （えぢとｒ） みｃろそｆｔ こｒぽらちおん １ みｃろそｆｔ わｙ れｄもんｄ、 わ ９８０５２ うにてｄ Ｓたてｓ えまいｌ： ぱんかｊｇ＠みｃろそｆｔ。こｍ"
    },
    {
      "indent": 3,
      "text": "Yu-Shun Wang (editor) Microsoft Corporation 1 Microsoft Way Redmond, WA 98052 United States Email: yushwang@microsoft.com",
      "ja": "ゆーしゅん わんｇ （えぢとｒ） みｃろそｆｔ こｒぽらちおん １ みｃろそｆｔ わｙ れｄもんｄ、 わ ９８０５２ うにてｄ Ｓたてｓ えまいｌ： ゆｓふぁんｇ＠みｃろそｆｔ。こｍ"
    }
  ]
}